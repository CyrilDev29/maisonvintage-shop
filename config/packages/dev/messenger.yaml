# config/packages/dev/messenger.yaml
framework:
    messenger:
        # En DEV, on écrase les transports pour simplifier le debug :
        # - "sync" : exécution immédiate dans le même process (utile pour voir les effets tout de suite)
        # - "failed" : on garde une file d'échecs au besoin
        transports:
            sync: 'sync://'
            failed: 'doctrine://default?queue_name=failed'

        # Routage : on force les messages sensibles à partir en synchrones
        routing:
            Symfony\Component\Mailer\Messenger\SendEmailMessage: sync
            Symfony\Component\Notifier\Message\ChatMessage: sync
            Symfony\Component\Notifier\Message\SmsMessage: sync
