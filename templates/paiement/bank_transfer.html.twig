{% extends 'base.html.twig' %}
{% block title %}Virement bancaire — Maisonvintage{% endblock %}

{% block body %}
    <section class="container" style="max-width:900px;margin:2rem auto;padding:0 1rem;">
        <h1 class="h4">Paiement par virement</h1>

        <p class="mb-2">
            Commande <strong>{{ order.reference }}</strong> enregistrée pour un montant de
            <strong>{{ order.total|number_format(2, ',', ' ') }} €</strong>.
        </p>

        <div class="alert alert-info">
            Merci d’effectuer votre virement sous 72 h en indiquant <strong>la référence
                {{ order.reference }}</strong> dans le libellé. La commande sera préparée dès réception des fonds.
            <button type="button" class="btn btn-sm btn-outline-dark ms-2" onclick="copyText('{{ order.reference }}')">Copier la référence</button>
        </div>

        <div class="card mb-3">
            <div class="card-body">
                <h2 class="h6">Coordonnées bancaires</h2>

                {% if bank_holder and bank_bankname and bank_iban and bank_bic %}
                    <ul class="mb-2" style="list-style:none;padding-left:0;">
                        <li><strong>Titulaire :</strong> {{ bank_holder }}</li>
                        <li><strong>Banque :</strong> {{ bank_bankname }}</li>
                        <li>
                            <strong>IBAN :</strong> <code id="iban">{{ bank_iban }}</code>
                            <button type="button" class="btn btn-sm btn-outline-secondary ms-2" onclick="copyText('{{ bank_iban }}')">Copier l’IBAN</button>
                        </li>
                        <li><strong>BIC :</strong> <code>{{ bank_bic }}</code></li>
                    </ul>
                    <p class="text-muted mb-0">Un récapitulatif vous a été envoyé par e-mail.</p>
                {% else %}
                    <div class="alert alert-warning mb-0">
                        Les coordonnées bancaires ne sont pas disponibles. Merci de contacter la boutique.
                    </div>
                {% endif %}
            </div>
        </div>

        <div class="d-flex gap-2">
            <a href="{{ path('app_account_orders') }}" class="btn btn-primary">Voir mes commandes</a>
            <a href="{{ path('home') }}" class="btn btn-outline-secondary">Continuer la navigation</a>
        </div>
    </section>

    <script>
        function copyText(text) {
            navigator.clipboard.writeText(String(text)).then(function(){}, function(){});
        }
    </script>
{% endblock %}
