{% extends 'base.html.twig' %}
{% block title %}Changer mon mot de passe{% endblock %}
{% block body %}
    <div class="container">
        <h1 class="h4 mb-3">Changer mon mot de passe</h1>

        {{ form_start(form) }}
        <div class="mb-3">
            {{ form_label(form.plainPassword.first) }}
            <div class="input-group">
                {{ form_widget(form.plainPassword.first, { attr: { id: 'pwd1' } }) }}
                <button type="button" class="btn btn-outline-secondary" id="togglePwd1">üëÅ</button>
            </div>
            {{ form_help(form.plainPassword.first) }}
            {{ form_errors(form.plainPassword.first) }}
        </div>

        <div class="mb-3">
            {{ form_label(form.plainPassword.second) }}
            <div class="input-group">
                {{ form_widget(form.plainPassword.second, { attr: { id: 'pwd2' } }) }}
                <button type="button" class="btn btn-outline-secondary" id="togglePwd2">üëÅ</button>
            </div>
            {{ form_errors(form.plainPassword.second) }}
        </div>

        <button class="btn btn-primary">Enregistrer</button>
        <a class="btn btn-outline-secondary" href="{{ path('app_account') }}">Retour</a>
        {{ form_end(form) }}
    </div>

    <script>
        (function(){
            function bind(btnId, inputId){
                const b = document.getElementById(btnId);
                const i = document.getElementById(inputId);
                if(!b || !i) return;
                b.addEventListener('click', () => { i.type = (i.type === 'password') ? 'text' : 'password'; });
            }
            bind('togglePwd1','pwd1');
            bind('togglePwd2','pwd2');
        })();
    </script>
{% endblock %}
